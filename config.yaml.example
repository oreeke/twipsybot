# TwipsyBot 配置文件示例
# 复制此文件为 config.yaml 并填写你的配置

misskey:
  instance_url: "https://misskey.example.com"       # Misskey 实例 URL（本地：http://localhost:port）
  access_token: "your_access_token_here"            # Misskey 访问令牌

openai:
  api_key: "your_api_key_here"                      # OpenAI API 密钥
  model: "deepseek-chat"                            # 使用的模型名称
  api_base: "https://api.deepseek.com/v1"           # OpenAI API 端点
  api_mode: "auto"                                  # auto/chat/responses
  max_tokens: 1000                                  # 最大生成 token 数
  temperature: 0.8                                  # 温度参数

bot:
  system_prompt: |                                  # 系统提示词（支持文件导入："prompts/*.txt"，"file://path/to/*.txt"）
    你是一个可爱的AI助手，运行在Misskey平台上。
    请用简短、友好的方式发帖和回答问题。

  timeline:
    enabled: false                                  # 是否订阅时间线
    home: false                                     # homeTimeline
    local: false                                    # localTimeline
    hybrid: false                                   # hybridTimeline
    global: false                                   # globalTimeline
    antenna_ids: []                                 # antenna ID 或名称（逗号/空格分隔）

  auto_post:
    enabled: true                                   # 是否启用自动发帖
    interval_minutes: 180                           # 发帖间隔（分钟）
    max_posts_per_day: 8                            # 每日最大发帖数量（凌晨 0 点重置计数器）
    visibility: "public"                            # 发帖可见性（public/home/followers）
    local_only: false                               # 是否禁用联合（仅本地可见）
    prompt: |                                       # 发帖提示词
      生成一篇有趣、有见解的社交媒体帖子。

  response:
    mention: true                                   # 是否响应提及（@）
    chat: true                                      # 是否响应聊天
    chat_memory: 10                                 # 聊天上下文记忆长度（条）
    rate_limit: -1                                  # 回复速率限制：同一用户回复最小间隔；-1 不限制；30s/5m/1h
    rate_limit_reply: "我需要休息一下..."            # 速率限制回复文案
    max_turns: -1                                   # 回复次数限制：同一用户最多对话轮数（机器人回复次数）；-1 不限制
    max_turns_reply: "我要回家了..."                 # 次数限制回复文案
    max_turns_release: -1                           # 次数限制解除时间：超限后多久解除；-1 不解除；30s/5m/1h
    whitelist:                                      # 白名单：username@host/userId，这些用户不受以上限制
      - "admin@example.com"
      - "user-id-123"
    blacklist:                                      # 黑名单：username@host/userId，这些用户禁止使用回复
      - "admin@example.com"
      - "user-id-123"

db:
  path: "data/twipsybot.db"                         # SQLite 路径
  clear: 30                                         # SQLite 数据保留天数（不含插件）；-1 不清理

log:
  level: "INFO"                                     # 日志级别 (DEBUG/INFO/WARNING/ERROR)
  dump_events: false                                # 是否输出事件原始数据（DEBUG）
